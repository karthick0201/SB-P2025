package com.consumer;

import java.io.IOException;
import java.net.URI;
import java.net.http.HttpClient;
import java.net.http.HttpRequest;
import java.net.http.HttpResponse;

public class PersonConsumer {

	public void httpClientPratice() throws IOException, InterruptedException {
		
		/* 1. GET - GET ALL PERSONS INFORMATION */
		gettingPersonsInfo();
		
	}

	private void gettingPersonsInfo() throws IOException, InterruptedException {

		//1. cREATE HttpClient Object
		HttpClient httpClient = HttpClient.newHttpClient();
		
		//2. Preparing Request Object
		
		HttpRequest request = HttpRequest
								.newBuilder()
								.uri(URI.create("http://localhost:1212/api/person/"))
								.header("Accept", "application/json")
								.GET()
								.build();
		// 3. API Request Call
		HttpResponse<String> httpResponse = httpClient.send(request, HttpResponse.BodyHandlers.ofString());
		
		if(httpResponse.statusCode() == 200) {
			String responseBody = httpResponse.body();
			System.out.println(responseBody);
		}else {
			System.out.println("Request Failed : " + httpResponse.statusCode());
			System.out.println("Info : " + httpResponse.body());
		}
		
	}

}
